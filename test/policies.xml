<config xmlns="http://tail-f.com/ns/config/1.0">
  <branch-service xmlns="http://example.com/branch">
    <branch-policies>
      <device>
        <role>
          <name>router</name>
          <model>
            <name>ISR4451-X/K9</name>
            <template>device-base-router-isr</template>
          </model>
          <policies>
            <!-- general>ACCESS-LIST</general -->
            <!-- netflow>NETFLOW</netflow -->
            <ospf>OSPF-NO-VLAN</ospf>
          </policies>
        </role>
        <role>
          <name>router</name>
          <model>
            <name>C6824-X-LE-40G</name>
            <template>device-base-router-catalyst</template>
          </model>
          <policies>
            <!-- general>ACCESS-LIST</general -->
            <!-- netflow>NETFLOW</netflow -->
            <ospf>OSPF-NO-VLAN</ospf>
          </policies>
        </role>
        <role>
          <name>core</name>
          <model>
            <name>C6824-X-LE-40G</name>
            <template>device-base-core</template>
          </model>
          <policies>
            <!-- general>ACCESS-LIST</general -->
            <general>SPANNING-TREE</general>
            <!-- vtp>VTP-POLICY</vtp -->
            <ospf>OSPF-WITH-VLAN</ospf>
          </policies>
        </role>
        <role>
          <name>access</name>
          <model>
            <name>WS-C3850-12X48U</name>
            <template>device-base-access</template>
          </model>
          <policies>
            <!-- general>ACCESS-LIST</general -->
            <general>SPANNING-TREE-ACCESS</general>
            <!-- vtp>VTP-POLICY</vtp -->
            <ospf>OSPF-ACCESS</ospf>
          </policies>
        </role>
        <role>
          <name>access-core</name>
          <model>
            <name>WS-C3850-12X48U</name>
            <template>device-base-core</template>
          </model>
          <policies>
            <!-- general>ACCESS-LIST</general -->
            <general>SPANNING-TREE</general>
            <!-- vtp>VTP-POLICY</vtp -->
            <ospf>OSPF-WITH-VLAN</ospf>
          </policies>
        </role>
        <registration>
          <name>PNP</name>
          <template>policy-device-pnp</template>
        </registration>
        <general>
          <name>ACCESS-LIST</name>
          <template>policy-device-access-list</template>
        </general>
        <general>
          <name>SPANNING-TREE</name>
          <template>policy-device-spanningtree</template>
        </general>
        <general>
          <name>SPANNING-TREE-ACCESS</name>
          <template>policy-device-spanningtree-access</template>
        </general>
        <static-route>
          <name>STATIC-ROUTE</name>
          <template>policy-device-static-route</template>
        </static-route>
        <loopback>
          <name>LOOPBACK</name>
          <template>policy-device-loopback</template>
        </loopback>
        <vtp>
          <name>VTP-POLICY</name>
          <template>policy-device-vtp</template>
          <domain-name>AIGGS</domain-name>
        </vtp>
        <switchstack>
          <name>SWITCH-STACK</name>
          <template>policy-device-switchstack</template>
        </switchstack>
        <ospf>
          <name>OSPF-ACCESS</name>
          <template>policy-device-ospf-vlan</template>
        </ospf>
        <ospf>
          <name>OSPF-WITH-VLAN</name>
          <vlan>9</vlan>
          <template>policy-device-ospf-vlan</template>
        </ospf>
        <ospf>
          <name>OSPF-NO-VLAN</name>
          <template>policy-device-ospf</template>
        </ospf>
        <ospf>
          <name>OSPF-ADDRESS</name>
          <template>policy-device-ospf-address</template>
        </ospf>
        <netflow>
          <name>NETFLOW</name>
          <template>policy-device-netflow</template>
          <collector-ip-address>33.33.33.33</collector-ip-address>
          <connection-type>router-wan</connection-type>
        </netflow>
        <routing>
          <name>ROUTING</name>
          <template>policy-device-routing</template>
        </routing>
      </device>
      <connection>
        <core-router>
          <name>CORE-ROUTER</name>
          <core>
            <template>connection-core-router-core</template>
          </core>
          <router>
            <template>connection-core-router-router</template>
          </router>
          <access-core>
            <template>connection-core-router-core</template>
          </access-core>
        </core-router>
        <!-- access-router><name>ACCESS-ROUTER</name><access-core><template>connection-core-router-core</template></access-core><router><template>connection-core-router-router</template></router></access-router -->
        <core-interlink>
          <name>CORE-INTERLINK</name>
          <core>
            <template>connection-core-interlink</template>
          </core>
        </core-interlink>
        <access-core>
          <name>ACCESS-CORE</name>
          <core>
            <template>connection-access-core-core</template>
          </core>
          <access>
            <template>connection-access-core-access</template>
          </access>
        </access-core>
        <access>
          <name>ACCESS-GENERAL</name>
          <access>
            <template>connection-access-port-general</template>
          </access>
          <access-core>
            <template>connection-access-port-general</template>
          </access-core>
        </access>
        <router-wan>
          <name>ROUTER-WAN</name>
          <router>
            <template>connection-router-wan-router</template>
          </router>
          <core>
            <template>connection-router-wan-router</template>
          </core>
        </router-wan>
        <router-interlink>
          <name>ROUTER-INTERLINK</name>
          <router>
            <template>connection-router-interlink</template>
          </router>
        </router-interlink>
      </connection>
      <branch>
        <topology-templates>
          <name>Single Device Branch</name>
          <model-template-file>branch-template-one-device</model-template-file>
        </topology-templates>
      </branch>
    </branch-policies>
  </branch-service>
</config>