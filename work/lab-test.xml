<config xmlns="http://tail-f.com/ns/config/1.0">
  <branch-service xmlns="http://example.com/branch">
    <branch>
      <name>test</name>
      <topology>
        <device>
          <name>lab-asr1</name>
          <role>wan router</role>
          <loopback-ip-address>1.1.1.1</loopback-ip-address>
          <bgp>
            <as-number>200</as-number>
            <network-ip-address>8.8.8.0</network-ip-address>
            <network-ip-mask>255.255.255.0</network-ip-mask>
            <ibgp>
              <peer-group>
                <name>BRANCH_IBGP</name>
                <remote-as-number>300</remote-as-number>
              </peer-group>
              <peer>
                <network-ip-address>9.9.9.9</network-ip-address>
                <interface>0/1/0</interface>
                <hostname>peer1</hostname>
              </peer>
              <peer>
                <network-ip-address>10.10.10.10</network-ip-address>
                <interface>0/1/1</interface>
                <hostname>peer2</hostname>
              </peer>
            </ibgp>
          </bgp>
        </device>
        <device>
          <name>lab-asr2</name>
          <role>wan router</role>
          <loopback-ip-address>1.1.1.2</loopback-ip-address>
          <bgp>
            <as-number>200</as-number>
            <network-ip-address>8.8.8.0</network-ip-address>
            <network-ip-mask>255.255.255.0</network-ip-mask>
            <ibgp>
              <peer-group>
                <name>BRANCH_IBGP</name>
                <remote-as-number>300</remote-as-number>
              </peer-group>
              <peer>
                <network-ip-address>9.9.9.9</network-ip-address>
                <interface>0/1/0</interface>
                <hostname>peer1</hostname>
              </peer>
              <peer>
                <network-ip-address>10.10.10.10</network-ip-address>
                <interface>0/1/1</interface>
                <hostname>peer2</hostname>
              </peer>
            </ibgp>
          </bgp>
        </device>
        <connection>
          <name>interlink-1</name>
          <type>interlink</type>
          <endpoint>
            <number>1</number>
            <device>lab-asr1</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/3</interface-name>
            <ip-address>5.5.5.5</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <ospf>bfd</ospf>
            </policy>
          </endpoint>
          <endpoint>
            <number>2</number>
            <device>lab-asr2</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/3</interface-name>
            <ip-address>5.5.5.5</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <ospf>bfd</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>interlink-2</name>
          <type>interlink</type>
          <endpoint>
            <number>1</number>
            <device>lab-asr1</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/1/0</interface-name>
            <ip-address>6.6.6.6</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <ospf>bfd</ospf>
            </policy>
          </endpoint>
          <endpoint>
            <number>2</number>
            <device>lab-asr2</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/1/0</interface-name>
            <ip-address>6.6.6.6</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <ospf>bfd</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>coreuplink-1</name>
          <type>wan-core</type>
          <endpoint>
            <number>1</number>
            <device>lab-asr1</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/1</interface-name>
            <ip-address>3.3.3.3</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <ospf>point-to-point</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>coreuplink-2</name>
          <type>wan-core</type>
          <endpoint>
            <number>1</number>
            <device>lab-asr1</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/2</interface-name>
            <ip-address>4.4.4.4</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <ospf>point-to-point</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>coreuplink-3</name>
          <type>wan-core</type>
          <endpoint>
            <number>1</number>
            <device>lab-asr2</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/1</interface-name>
            <ip-address>3.3.3.3</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <ospf>point-to-point</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>coreuplink-4</name>
          <type>wan-core</type>
          <endpoint>
            <number>1</number>
            <device>lab-asr2</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/2</interface-name>
            <ip-address>4.4.4.4</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <ospf>point-to-point</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>wan-1</name>
          <type>wan-ethernet</type>
          <endpoint>
            <number>1</number>
            <device>lab-asr1</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/0</interface-name>
            <ip-address>2.2.2.2</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <bandwidth>default</bandwidth>
              <netflow>default</netflow>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>wan-2</name>
          <type>wan-ethernet</type>
          <endpoint>
            <number>1</number>
            <device>lab-asr2</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/0</interface-name>
            <ip-address>2.2.2.2</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <bandwidth>default</bandwidth>
              <netflow>default</netflow>
            </policy>
          </endpoint>
        </connection>
      </topology>
      <netflow-collector-ip-address>12.12.12.12</netflow-collector-ip-address>
    </branch>
    <branch-policies>
      <interface>
        <bfd-interval>
          <name>default</name>
          <template>policy-interface-bfd</template>
          <msecs>500</msecs>
          <min_rx>400</min_rx>
          <multiplier>4</multiplier>
        </bfd-interval>
        <bandwidth>
          <name>default</name>
          <template>policy-interface-bandwidth</template>
          <value>400</value>
        </bandwidth>
        <netflow>
          <name>default</name>
          <template>policy-interface-netflow</template>
        </netflow>
        <ospf>
          <name>point-to-point</name>
          <template>policy-interface-ospf</template>
        </ospf>
        <ospf>
          <name>bfd</name>
          <template>policy-interface-ospf-bfd</template>
        </ospf>
      </interface>
    </branch-policies>
  </branch-service>
</config>
