<config xmlns="http://tail-f.com/ns/config/1.0">
  <branch-service xmlns="http://example.com/branch">
    <branch>
      <name>test</name>
      <topology>
        <device>
          <name>sim-catalyst-6840-1</name>
          <type>
            <role>core switch</role>
            <model>C6824-X-LE-40G</model>
          </type>
          <loopback-ip-address>1.1.1.3</loopback-ip-address>
          <vtp>
            <domain-name>AIGGS</domain-name>
          </vtp>
        </device>
        <!-- device>
          <name>sim-asr-1</name>
          <type>
            <role>wan router</role>
            <model>ASR1002</model>
          </type>
          <loopback-ip-address>1.1.1.1</loopback-ip-address>
          <bgp>
            <as-number>200</as-number>
            <network-ip-address>8.8.8.0</network-ip-address>
            <network-ip-mask>255.255.255.0</network-ip-mask>
            <ibgp>
              <peer-group>
                <name>BRANCH_IBGP</name>
                <remote-as-number>300</remote-as-number>
              </peer-group>
              <peer>
                <network-ip-address>9.9.9.9</network-ip-address>
                <interface>0/1/0</interface>
                <hostname>peer1</hostname>
              </peer>
              <peer>
                <network-ip-address>10.10.10.10</network-ip-address>
                <interface>0/1/1</interface>
                <hostname>peer2</hostname>
              </peer>
            </ibgp>
          </bgp>
        </device>
        <device>
          <name>sim-asr-2</name>
          <type>
            <role>wan router</role>
            <model>ASR1002</model>
          </type>
          <loopback-ip-address>1.1.1.2</loopback-ip-address>
          <bgp>
            <as-number>200</as-number>
            <network-ip-address>8.8.8.0</network-ip-address>
            <network-ip-mask>255.255.255.0</network-ip-mask>
            <ibgp>
              <peer-group>
                <name>BRANCH_IBGP</name>
                <remote-as-number>300</remote-as-number>
              </peer-group>
              <peer>
                <network-ip-address>9.9.9.9</network-ip-address>
                <interface>0/1/0</interface>
                <hostname>peer1</hostname>
              </peer>
              <peer>
                <network-ip-address>10.10.10.10</network-ip-address>
                <interface>0/1/1</interface>
                <hostname>peer2</hostname>
              </peer>
            </ibgp>
          </bgp>
        </device>
        <connection>
          <name>interlink-1</name>
          <type>interlink</type>
          <endpoint>
            <number>1</number>
            <device>sim-asr-1</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/3</interface-name>
            <ip-address>5.5.5.5</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <ospf>bfd</ospf>
            </policy>
          </endpoint>
          <endpoint>
            <number>2</number>
            <device>sim-asr-2</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/3</interface-name>
            <ip-address>5.5.5.5</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <ospf>bfd</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>interlink-2</name>
          <type>interlink</type>
          <endpoint>
            <number>1</number>
            <device>sim-asr-1</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/1/0</interface-name>
            <ip-address>6.6.6.6</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <ospf>bfd</ospf>
            </policy>
          </endpoint>
          <endpoint>
            <number>2</number>
            <device>sim-asr-2</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/1/0</interface-name>
            <ip-address>6.6.6.6</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <ospf>bfd</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>coreuplink-1</name>
          <type>router-core</type>
          <endpoint>
            <number>1</number>
            <device>sim-asr-1</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/1</interface-name>
            <ip-address>3.3.3.3</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <ospf>point-to-point-Gigabit</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>coreuplink-2</name>
          <type>router-core</type>
          <endpoint>
            <number>1</number>
            <device>sim-asr-1</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/2</interface-name>
            <ip-address>4.4.4.4</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <ospf>point-to-point-Gigabit</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>coreuplink-3</name>
          <type>router-core</type>
          <endpoint>
            <number>1</number>
            <device>sim-asr-2</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/1</interface-name>
            <ip-address>3.3.3.3</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <ospf>point-to-point-Gigabit</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>coreuplink-4</name>
          <type>router-core</type>
          <endpoint>
            <number>1</number>
            <device>sim-asr-2</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/2</interface-name>
            <ip-address>4.4.4.4</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <ospf>point-to-point-Gigabit</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>wan-1</name>
          <type>wan-ethernet</type>
          <endpoint>
            <number>1</number>
            <device>sim-asr-1</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/0</interface-name>
            <ip-address>2.2.2.2</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <bandwidth>default</bandwidth>
              <netflow>default</netflow>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>wan-2</name>
          <type>wan-ethernet</type>
          <endpoint>
            <number>1</number>
            <device>sim-asr-2</device>
            <interface-type>GigabitEthernet</interface-type>
            <interface-name>0/0/0</interface-name>
            <ip-address>2.2.2.2</ip-address>
            <ip-mask>255.255.255.0</ip-mask>
            <policy>
              <bfd-interval>default</bfd-interval>
              <bandwidth>default</bandwidth>
              <netflow>default</netflow>
            </policy>
          </endpoint>
        </connection -->
        <connection>
          <name>core-router-uplink-1</name>
          <type>router-core</type>
          <endpoint>
            <number>1</number>
            <device>sim-catalyst-6840-1</device>
            <interface-type>TenGigabitEthernet</interface-type>
            <interface-name>1/1</interface-name>
            <ip-address>3.2.2.2</ip-address>
            <ip-mask>255.255.255.254</ip-mask>
            <policy>
              <ospf>point-to-point-TenGigabit</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>core-router-uplink-2</name>
          <type>router-core</type>
          <endpoint>
            <number>1</number>
            <device>sim-catalyst-6840-1</device>
            <interface-type>TenGigabitEthernet</interface-type>
            <interface-name>1/2</interface-name>
            <ip-address>3.2.2.3</ip-address>
            <ip-mask>255.255.255.254</ip-mask>
            <policy>
              <ospf>point-to-point-TenGigabit</ospf>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>core-router-interlink-1</name>
          <type>interlink</type>
          <endpoint>
            <number>1</number>
            <device>sim-catalyst-6840-1</device>
            <interface-type>Port-channel</interface-type>
            <interface-name>1</interface-name>
            <policy>
              <switchport>trunked-Port-channel</switchport>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>core-router-interlink-2</name>
          <type>interlink</type>
          <endpoint>
            <number>1</number>
            <device>sim-catalyst-6840-1</device>
            <interface-type>TenGigabitEthernet</interface-type>
            <interface-name>1/3</interface-name>
            <policy>
              <switchport>trunked-TenGigabit</switchport>
              <channelgroup>channelgroup</channelgroup>
            </policy>
          </endpoint>
        </connection>
        <connection>
          <name>core-router-interlink-3</name>
          <type>interlink</type>
          <endpoint>
            <number>1</number>
            <device>sim-catalyst-6840-1</device>
            <interface-type>TenGigabitEthernet</interface-type>
            <interface-name>1/4</interface-name>
            <policy>
              <switchport>trunked-TenGigabit</switchport>
              <channelgroup>channelgroup</channelgroup>
            </policy>
          </endpoint>
        </connection>
      </topology>
      <netflow-collector-ip-address>12.12.12.12</netflow-collector-ip-address>
    </branch>
    <branch-policies>
      <device>
        <general>
          <name>access-list</name>
          <template>policy-device-access-list</template>
        </general>
        <role>
          <name>wan router</name>
          <model>
            <name>ASR1002</name>
            <template>wan-router-base-asr-template</template>
          </model>
        </role>
        <role>
          <name>core switch</name>
          <model>
            <name>C6824-X-LE-40G</name>
            <template>core-router-base-6840</template>
          </model>
        </role>
      </device>
      <interface>
        <bfd-interval>
          <name>default</name>
          <template>policy-interface-bfd</template>
          <msecs>500</msecs>
          <min_rx>400</min_rx>
          <multiplier>4</multiplier>
        </bfd-interval>
        <bandwidth>
          <name>default</name>
          <template>policy-interface-bandwidth</template>
          <value>400</value>
        </bandwidth>
        <netflow>
          <name>default</name>
          <template>policy-interface-netflow</template>
        </netflow>
        <ospf>
          <name>point-to-point-Gigabit</name>
          <template>policy-interface-ospf-Gigabit</template>
        </ospf>
        <ospf>
          <name>point-to-point-TenGigabit</name>
          <template>policy-interface-ospf-TenGigabit</template>
        </ospf>
        <ospf>
          <name>bfd</name>
          <template>policy-interface-ospf-bfd</template>
        </ospf>
        <switchport>
          <name>trunked-Port-channel</name>
          <template>policy-interface-switchport-PortChannel</template>
        </switchport>
        <switchport>
          <name>trunked-TenGigabit</name>
          <template>policy-interface-switchport-TenGigabit</template>
        </switchport>
        <channelgroup>
          <name>channelgroup</name>
          <template>policy-interface-channelgroup</template>
        </channelgroup>
      </interface>
    </branch-policies>
  </branch-service>
</config>
